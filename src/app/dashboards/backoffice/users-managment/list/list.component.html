<div class="bg-gray-100 p-3">

  <app-page-title [title]="'Users management'" [links]="[{value: 'user', route: 'users.list'}]" ></app-page-title>

  <div class="mx-auto bg-white p-6 rounded-md shadow-md">

    <h1 class="text-2xl font-bold mb-4">Users ( <span class="text-blue-500">{{ users?.length }}</span> )</h1>

    <div class="my-3">
      <div class="">
        <label for="search" class="block text-sm font-medium leading-6 text-gray-900">Filter users:</label>
        <div class="mt-2">
          <input id="search" name="search" type="search" autocomplete="search"
                 [(ngModel)]="search"
                 class="rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
        </div>
      </div>

      <div>
        <button type="button"
                routerLink="new"
                class="text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800">
          Add user
        </button>
      </div>
    </div>

    <table class="min-w-full border border-gray-300">
      <thead>
      <tr class="bg-gray-100">
        <th class="py-2 px-4 border-b">ID</th>
        <th class="py-2 px-4 border-b">First Name</th>
        <th class="py-2 px-4 border-b">Last Name</th>
        <th class="py-2 px-4 border-b">Email</th>
        <th class="py-2 px-4 border-b">Created At</th>
        <th class="py-2 px-4 border-b">Verified At</th>
        <th class="py-2 px-4 border-b">Authorities</th>
        <th class="py-2 px-4 border-b">Organization Name</th>
      </tr>
      </thead>
      <tbody class="text-center">
      <tr  *ngFor="let user of users">
        <td class="py-2 px-4 border-b">{{ user.id }}</td>
        <td class="py-2 px-4 border-b">{{ user.firstName }}</td>
        <td class="py-2 px-4 border-b">{{ user.lastName }}</td>
        <td class="py-2 px-4 border-b">{{ user.email }}</td>
        <td class="py-2 px-4 border-b">{{ user.createdAt | date: "YYYY-MM-dd hh:mm a" }}</td>
        <td class="py-2 px-4 border-b">{{ (user.verifiedAt | date: "YYYY-MM-dd hh:mm a") || '-' }}</td>
        <td class="py-2 px-4 border-b">
          <label class="bg-blue-100 text-blue-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-full dark:bg-blue-900 dark:text-blue-300"
                 *ngFor="let authority of user.authorities"
          >
            {{ authority }}
          </label>
        </td>
        <td class="py-2 px-4 border-b">{{ user.organizationName  }}</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
